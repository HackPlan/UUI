import { Meta, Story, Preview, Props } from '@storybook/addon-docs/blocks';
import { Cascader } from '../src';
import { useState, useEffect } from 'react';

<Meta title="Cascader" component={Cascader} />

# 级联选择器 Cascader

### 简单使用

<Preview>
  <Story name="Cascader">
    {() => {
      const [value, setValue] = useState([])
      const alp = 'abcdefghijklmnopqrst'
      const options = alp
        .split('')
        .map((i) => {
          return {
            label: i.toUpperCase(),
            value: i,
            children: alp.split('').map((j) => {
              return {
                label: i.toUpperCase() + j.toUpperCase(),
                value: i + j,
                children: alp.split('').map((k) => {
                  return {
                    label: i.toUpperCase() + j.toUpperCase() + k.toUpperCase(),
                    value: i + j + k,
                  }
                })
              }
            })
          }
        })
      options[1].children[2].children[3].disabled = true
      return (
        <Cascader
          placeholder={'Please select'}
          options={options}
          value={value}
          onChange={(value) => { setValue(value) }}
        >
        </Cascader>
      )
    }}
  </Story>
</Preview>

### 可选择任意一级选项

`props.changeOnFinalSelect` 默认为 `true`，这个时候，只有当选择了最后一级 option 才会回调 `props.onChange`；反之，点击选择任何一级 option 都会回调。

<Preview>
  <Story name="Cascader with select any level option">
    {() => {
      const [value, setValue] = useState([])
      const alp = 'abcdefghi'
      const options = alp
        .split('')
        .map((i) => {
          return {
            label: i.toUpperCase(),
            value: i,
            children: alp.split('').map((j) => {
              return {
                label: i.toUpperCase() + j.toUpperCase(),
                value: i + j,
                children: alp.split('').map((k) => {
                  return {
                    label: i.toUpperCase() + j.toUpperCase() + k.toUpperCase(),
                    value: i + j + k,
                  }
                })
              }
            })
          }
        })
      return (
        <Cascader
          placeholder={'Please select'}
          changeOnFinalSelect={false}
          options={options}
          value={value}
          onChange={(value) => { console.log('onChange', value); setValue(value) }}
        >
        </Cascader>
      )
    }}
  </Story>
</Preview>

### 可搜索选项

当启用搜索时（即 `props.enableSearch`），只有当 `CascaderOption.label` 传入字符串时，才会被搜索到。

<Preview>
  <Story name="Cascader with search">
    {() => {
      const [value, setValue] = useState([])
      const alp = 'abcdefghi'
      const options = alp
        .split('')
        .map((i) => {
          return {
            label: i.toUpperCase(),
            value: i,
            children: alp.split('').map((j) => {
              return {
                label: i.toUpperCase() + j.toUpperCase(),
                value: i + j,
                children: alp.split('').map((k) => {
                  return {
                    label: i.toUpperCase() + j.toUpperCase() + k.toUpperCase(),
                    value: i + j + k,
                  }
                })
              }
            })
          }
        })
      return (
        <Cascader
          placeholder={'Please select'}
          options={options}
          value={value}
          onChange={(value) => { console.log('onChange', value); setValue(value) }}
          enableSearch
        >
        </Cascader>
      )
    }}
  </Story>
</Preview>

### Props

<Props components={{ Cascader }} />

### CascaderOption

```tsx
export interface CascaderOption {
  value: string;
  label?: React.ReactNode;
  disabled?: boolean;
  children?: CascaderOption[];
}
```