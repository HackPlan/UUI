import { Meta, Story, Preview, Props } from '@storybook/addon-docs/blocks';
import { Table, TableNodes } from '../src';
import { useState } from 'react';

<Meta title="Table" component={Table} />

# 表格 Table

### 简单使用

<Preview>
  <Story name="Table">
    {() => {
      const data = [
        { id: 'asdvciu', name: "Bobby P. Morton", age: "63", gender: "male", mobile: "785-481-2375", email: "morton@example.com", profession: "Doctor" },
        { id: 'aserghd', name: "Levi R. Oglesby", age: "35", gender: "female", mobile: "631-285-1780", email: "oglesby@example.com", profession: "Police" },
        { id: 'fgher4t', name: "John S. Cassidy", age: "19", gender: "male", mobile: "719-328-5475", email: "cassidy@example.com", profession: "Student" },
      ]
      const columns = [
        { key: 'name', title: "Name" },
        { key: 'age', title: "Age" },
        { key: 'gender', title: "Gender" },
        { key: 'mobile', title: "Mobile" },
        { key: 'email', title: "Email" },
        { key: 'profession', title: "Profession" },
      ]
      const rows = data.map((i) => {
        return {
          id: i.id,
          cells: [
            i.name,
            i.age,
            i.gender,
            i.mobile,
            i.email,
            i.profession,
          ],
        }
      })
      return (
        <Table
          columns={columns}
          rows={rows}
        ></Table>
      )
    }}
  </Story>
</Preview>

### 多选表格行

<Preview>
  <Story name="Table with selection">
    {() => {
      const data = [
        { id: 'asdvciu', name: "Bobby P. Morton", age: "63", gender: "male", mobile: "785-481-2375", email: "morton@example.com", profession: "Doctor" },
        { id: 'aserghd', name: "Levi R. Oglesby", age: "35", gender: "female", mobile: "631-285-1780", email: "oglesby@example.com", profession: "Police" },
        { id: 'fgher4t', name: "John S. Cassidy", age: "19", gender: "male", mobile: "719-328-5475", email: "cassidy@example.com", profession: "Student" },
      ]
      const columns = [
        { key: 'name', title: "Name" },
        { key: 'age', title: "Age" },
        { key: 'gender', title: "Gender" },
        { key: 'mobile', title: "Mobile" },
        { key: 'email', title: "Email" },
        { key: 'profession', title: "Profession" },
      ]
      const rows = data.map((i) => {
        return {
          id: i.id,
          cells: [
            i.name,
            i.age,
            i.gender,
            i.mobile,
            i.email,
            i.profession,
          ],
        }
      })
      const [selectedIndexes, setSelectedIndexes] = useState([])
      return (
        <Table
          columns={columns}
          rows={rows}
          selectedIndexes={selectedIndexes}
          onSelected={(indexes) => { setSelectedIndexes(indexes) }}
        ></Table>
      )
    }}
  </Story>
</Preview>

### 表头分组

<Preview>
  <Story name="Table with grouping column">
    {() => {
      const data = [
        { id: 'asdvciu', name: "Bobby P. Morton", age: "63", gender: "male", mobile: "785-481-2375", email: "morton@example.com", profession: "Doctor" },
        { id: 'aserghd', name: "Levi R. Oglesby", age: "35", gender: "female", mobile: "631-285-1780", email: "oglesby@example.com", profession: "Police" },
        { id: 'fgher4t', name: "John S. Cassidy", age: "19", gender: "male", mobile: "719-328-5475", email: "cassidy@example.com", profession: "Student" },
      ]
      const columns = [{
        key: 'person',
        title: 'Person',
        children: [{
          key: 'info',
          title: 'Info',
          children: [{
            key: 'name',
            title: 'Name',
          }, {
            key: 'age',
            title: 'Age',
          }, {
            key: 'gender',
            title: 'Gender',
          }]
        }, {
          key: 'contact',
          title: 'Contact',
          children: [{
            key: 'mobile',
            title: 'Mobile',
          }, {
            key: 'email',
            title: 'Email',
          }]
        }]
      }, {
        key: 'profession',
        title: 'Profession'
      }]
      const rows = data.map((i) => {
        return {
          id: i.id,
          cells: [
            i.name,
            i.age,
            i.gender,
            i.mobile,
            i.email,
            i.profession,
          ],
        }
      })
      return (
        <Table
          columns={columns}
          rows={rows}
        ></Table>
      )
    }}
  </Story>
</Preview>

### 空表格空状态视图

<Preview>
  <Story name="Table with empty data">
    {() => {
      const columns = [
        { key: 'name', title: "Name" },
        { key: 'age', title: "Age" },
        { key: 'gender', title: "Gender" },
        { key: 'mobile', title: "Mobile" },
        { key: 'email', title: "Email" },
        { key: 'profession', title: "Profession" },
      ]
      const rows = []
      return (
        <Table
          columns={columns}
          rows={rows}
        ></Table>
      )
    }}
  </Story>
</Preview>

### 隐藏表格表头

<Preview>
  <Story name="Table hide header">
    {() => {
      const data = [
        { id: 'asdvciu', name: "Bobby P. Morton", age: "63", gender: "male", mobile: "785-481-2375", email: "morton@example.com", profession: "Doctor" },
        { id: 'aserghd', name: "Levi R. Oglesby", age: "35", gender: "female", mobile: "631-285-1780", email: "oglesby@example.com", profession: "Police" },
        { id: 'fgher4t', name: "John S. Cassidy", age: "19", gender: "male", mobile: "719-328-5475", email: "cassidy@example.com", profession: "Student" },
      ]
      const columns = [
        { key: 'name', title: "Name" },
        { key: 'age', title: "Age" },
        { key: 'gender', title: "Gender" },
        { key: 'mobile', title: "Mobile" },
        { key: 'email', title: "Email" },
        { key: 'profession', title: "Profession" },
      ]
      const rows = data.map((i) => {
        return {
          id: i.id,
          cells: [
            i.name,
            i.age,
            i.gender,
            i.mobile,
            i.email,
            i.profession,
          ],
        }
      })
      return (
        <Table
          columns={columns}
          rows={rows}
          hideHeader
        ></Table>
      )
    }}
  </Story>
</Preview>

### Table Types

```typescript
interface TableColumn {
  title: React.ReactNode
  children?: TableColumn[]
}
```

### Props

<Props components={{ Table }} />